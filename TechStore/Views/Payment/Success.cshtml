@model TechStore.Web.ViewModels.Payment.PaymentSuccessViewModel

@{
    ViewData["Title"] = "Payment Successful";
}

<div class="container mt-5">
    <div class="card p-4 shadow-lg bg-white text-dark">

        <h2 class="text-success mb-3">Thank you for your order!</h2>

        <p class="fs-5">
            Your payment was successful. Your order has been received.
        </p>

        <div class="mb-4">
            <strong>Order #:</strong> @Model.OrderId<br />
            <strong>Total Paid:</strong>
            <span class="fw-bold text-success">
                @Model.TotalAmount.ToString("F2") €
            </span>
        </div>

        <h4 class="mt-4 mb-3">Products in your order</h4>

        @if (!Model.Products.Any())
        {
            <div class="alert alert-warning">
                Products are not available for display.
            </div>
        }
        else
        {
            <div class="list-group mb-4">
                @foreach (var p in Model.Products)
                {
                    <div class="list-group-item py-3">
                        <div class="row align-items-center">

                            <div class="col-md-2 text-center">
                                <img src="@p.Product.ImageUrl"
                                     alt="@p.Product.Name"
                                     class="img-fluid rounded border"
                                     style="max-height:80px;" />
                            </div>

                            <div class="col-md-6">
                                <h6 class="fw-bold mb-1">@p.Product.Name</h6>
                                <div class="text-muted small">
                                    Quantity: <strong>@p.Quantity</strong><br />
                                    Unit price: <strong>@p.UnitPrice.ToString("F2") €</strong>
                                </div>
                            </div>

                            <div class="col-md-4 text-end">
                                <span class="fw-bold fs-5">
                                    @((p.Quantity * p.UnitPrice).ToString("F2")) €
                                </span>
                            </div>

                        </div>
                    </div>
                }
            </div>
        }

        <div class="d-flex gap-2">
            <a asp-controller="Category"
               asp-action="Index"
               class="btn btn-primary">
                Continue Shopping
            </a>

            <a asp-controller="Order"
               asp-action="MyOrders"
               class="btn btn-outline-dark">
                View My Orders
            </a>
        </div>

    </div>
</div>
